<div class ="fields">
  <div class="workout">
    <p>
      <fieldset>
        <input type="checkbox" class="parentCheckBox" />
        Every Day

        <%= f.check_box :sunday, :class =>"childCheckBox" %>
        <%= f.label :sunday, "Sunday", :class =>"childCheckBox" %>

        <%= f.check_box :monday, :class =>"childCheckBox" %>
        <%= f.label :monday, "Monday", :class =>"childCheckBox" %>

        <%= f.check_box :tuesday, :class =>"childCheckBox" %>
        <%= f.label :tuesday, "Tuesday", :class =>"childCheckBox" %>
      </p>
      <p>
        <%= f.check_box :wednesday, :class =>"childCheckBox" %>
        <%= f.label :wednesday, "Wednesday", :class =>"childCheckBox" %>
        
        <%= f.check_box :thursday, :class =>"childCheckBox" %>
        <%= f.label :thursday, "Thursday", :class =>"childCheckBox" %>

        <%= f.check_box :friday, :class =>"childCheckBox" %>
        <%= f.label :friday, "Friday", :class =>"childCheckBox" %>

        <%= f.check_box :saturday, :class =>"childCheckBox" %>
        <%= f.label :saturday, "Saturday", :class =>"childCheckBox" %>
      </fieldset>
        <%= link_to_remove_fields "Delete", f %>
    </p>
  <%= f.fields_for :exercises do |builder| %>
    <%= render 'exercise_fields', :f => builder %>
  <% end %>
  <div class="add_exercise_button"><%= link_to_add_fields "Add Exercises", f, :exercises %></div>
  </div>
</div>

<script type="text/javascript">
$(document).ready(function(){
        $('.add_exercise_button').show();
});

$(document).ready(
    function() {
        //clicking the parent checkbox should check or uncheck all child checkboxes
        $(".parentCheckBox").click(
            function() {
                $(this).parents('fieldset:eq(0)').find('.childCheckBox').attr('checked', this.checked);
            }
        );
        //clicking the last unchecked or checked checkbox should check or uncheck the parent checkbox
        $('.childCheckBox').click(
            function() {
                if ($(this).parents('fieldset:eq(0)').find('.parentCheckBox').attr('checked') == true && this.checked == false)
                    $(this).parents('fieldset:eq(0)').find('.parentCheckBox').attr('checked', false);
                if (this.checked == true) {
                    var flag = true;
                    $(this).parents('fieldset:eq(0)').find('.childCheckBox').each(
	                    function() {
	                        if (this.checked == false)
	                            flag = false;
	                    }
                    );
                    $(this).parents('fieldset:eq(0)').find('.parentCheckBox').attr('checked', flag);
                }
            }
        );
    }
);
</script>